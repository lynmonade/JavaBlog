# （20170522）DCA项目-环境搭建

## 技术选型

* IDE：MyEclipse2015,
* MVC框架：struts2.2.1
* IOC容器：spring3.0.5
* ORM框架：MyBatis3.4.4
* 中间件：tomcat6.0.53
* 前端组件库：MiniUI3.5
* 数据库：oracle11g

## 需求初定

开发一个类似于综合统计平台的新平台，名为DCA（Data Collection & Analysis）

* 提供注册界面供用户注册
* 提供登录、退出的场景
* 首页是左右结构，左边为导航树
* 提供4A级别的人员角色权限管理（基于RBAC权限管理模型）
  * [[RBAC权限模型——项目实战](http://blog.csdn.net/zwk626542417/article/details/46726491)]
  * [[RBAC权限管理](http://blog.csdn.net/painsonline/article/details/7183613)]

## 引用自定义目录的struts.xml

通常我们直接把struts.xml文件放在src目录下。这样我们便可以直接在web.xml中引用到它。如果我们放在src的子目录中，则必须做额外的配置：

* 加入<input-param>来指定引用路径
* 首先要引用struts-default.xml，它在strut2-core里面
* 接着，假设在src目录下新建一个config文件夹用于放置struts.xml文件，然后用相对于src路径的方式进行引用

```xml
<!-- struts2.2.1配置 -->
<filter>
	<filter-name>struts2</filter-name>
	<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
	<init-param>
		<param-name>config</param-name>
		<param-value>struts-default.xml,config/struts.xml</param-value>
	</init-param>
</filter>
<filter-mapping>
	<filter-name>struts2</filter-name>
	<url-pattern>/*</url-pattern>
</filter-mapping>
```

[指定struts2配置文件struts.xml的路径](http://blog.csdn.net/qq964166471/article/details/19915717)

[如何指定struts2配置文件的路径?](http://bbs.csdn.net/topics/300238464)

## struts2用哪个核心过滤器

FilterDispatcher是struts2.0.x到2.1.2版本的核心过滤器。StrutsPrepareAndExecuteFilter是自2.1.3开始就替代了FilterDispatcher。

[struts2 FilterDispatcher 和 StrutsPrepareAndExecuteFilter 的区别](http://blog.csdn.net/s_ongfei/article/details/5811070)

## URL映射的问题

今天namespace前面没加/真是坑死人。因此特意写了一篇struts2路径映射的文章，以此警惕。此外，还规范了jsp的存放位置：必须在WEB-INF下面。

## MiniUI兼容性

公司用的是miniui3.5，它在高版本的chrome、firefox下完全没法兼容，我测试过360极速浏览器50.0.2661.102和firefox53.0.2，都没法解析`mini.parse()`这条语句。然而在chrome46.0.2490.71中测试则没有兼容性问题。看来这个坑爹玩意还真的只是为兼容IE8而生的，互联网产品不建议使用。

## 引入MiniUI

引入miniui有有两种方式：

* 仅引用boot.js即可
* 按顺序引用jquery-1.6.2.min.js、themes/default/miniui.css、miniui.js

## MiniUI前端验证

今天尝试了MiniUI的前端验证，前端验证分为两种：

* 使用miniui内置的标签属性，只要给标签添加对应的验证属性就能验证
* 给标签绑定对应的验证方法，miniui在调用`form.validate()`时会自动帮你调用那些验证方法



#  