# 容器（00）常用容器

Collection接口是描述了一个集合应该具备的基本操作。在API文档里有提到，Collection接口规定，所有Collection的子类都应该包含一个空的构造函数，以及一个以Collection作为参数的构造函数。虽然没有办法强制要求这么做，但JDK里的Collection子类都自觉遵循这一要求。

List接口继承了Collection接口，List接口用于表示有序集合（known as a sequence）。List容器允许插入相同的元素，有些子类甚至允许插入null元素。

Collection和Map都可以完成自动装箱与拆箱，自动实现基本类型到包装类的双向转换。

![](http://wx1.sinaimg.cn/mw690/0065Y1avgy1fdhhmgvxdfj30fp0e4dij.jpg)

上图是集合家族中的类库图。它遵循`接口-->抽象类-->实现类`的模式。其中，以Abstract开头的类是抽象类，抽象类只实现了特定接口的部分方法，如果你想创建自己的集合实现类，你可以直接继承抽象类，而无需从零开始去实现接口。事实上，Java的容器家族包含了足够多的实现类，可以满足你的任何需求，无需开发者去创建新的容器。

## ArrayList

ArrayList允许添加相同的元素，允许添加null元素，null元素会影响size。ArrayList在使用index下标查询元素时非常快，但新增或删除元素时性能较差。

### API分析

```java
//构造函数
ArrayList()
//使用一个集合构造一个新的集合
ArrayList(Collection<? extends E> c) //new ArrayList(Arrays.asList(myArray));
ArrayList(int initialCapacity)
  
//新增与设置
boolean add(E e)
void add(int index, E element) 
boolean addAll(Collection<? extends E> c)
boolean addAll(int index, Collection<? extends E> c)
E set(int index, E element)

//删除
void clear() ////删除所有元素，得到一个空的List
boolean remove(Object o) //删除第一个相等的元素
E remove(int index) //删除特定位置的元素
void removeRange(int fromIndex, int toIndex) //闭开区间[fromIndex, toIndex)

//size相关
int size() 
void trimToSize() 
boolean isEmpty() //使用capacity初始化的list，isEmpty()也是true，因为list本身并没包含元素，只是有空位而已
  
//index查询相关
int indexOf(Object o) //返回的第一个遇到的相等元素。如果没有符合的元素，则返回-1
int lastIndexOf(Object o) //返回最后一个遇到的相等元素。如果没有符合的元素，则返回-1

//拷贝，执行的是shadow copy，即两个集合共享其中的元素
Object clone() 

//转为数组,两个toArray方法对于元素都是shadowCopy
Object[] toArray() 
<T> T[] toArray(T[] a) //把元素拷贝到方法参数数组中
```

## LinkedList

LinkedList是有序链表，它可以作为栈、队列的实现类。LinkedList的新增、删除元素操作效率非常高，但随机遍历的速度较慢。LinkedList在开发中用的较少，用到再学习吧。

## Set

Set不保存重复的元素。Set具有与Collection完全一样的接口，没有任何额外的功能。Set中最常被用的场景是**测试归属性**：你可以很容易地询问某个对象是否在某个Set中。正因如此，查找就成为了Set中最重要的操作，所以通常我们会选择HashSet实现类。HashSet专门对快速查询进行了优化。HashSet底层使用的是散列函数。TreeSet底层使用红-黑树存储数据。这两个是比较常用的Set实现类。

## Map

Map允许我们存储Key-Value对，Key必须是同一类型的不同对象，比如Key都是String类型，但String的值必须不一样。而Value只要求是同一类型的数据，Value值可以是相同的。比较常用的是HashMap、TreeMap。

## Stack

Stack翻译过来是**栈**，栈是一种**后进先出（LIFO）**的容器。有时栈也被成为叠加栈。可以把栈想象成是一叠搭在一起的碟子，最后放入的碟子最先被拿出来使用。LinkedList具有能够直接实现栈的所有功能的方法，因此我们可以直接把LinkedList作为栈来使用。

## Queue

Queue翻译过来是**队列**，队列是一个典型的**先进先出（FIFO）**的容器。即从容器的一端放入事物，从另一端取出，并且事物放入容器的顺序与取出的顺序是相同的。队列常被当作一种可靠的将对象从程序的某个区域传输到另一个区域的途径。队列在并发编程中特别重要，因为它们可以安全地将对象从一个任务传输给另一个任务。

LinkedList是Queue的一种实现类，它提供了方法以支持队列的行为。Queue接口摘花了对LinkedList的方法访问权限，以使得只有恰当的方法才可以使用，因此，你能够访问到的LinkedList方法会变少。此外，也不鼓励将Queue类型强制转换为LinkedList。

