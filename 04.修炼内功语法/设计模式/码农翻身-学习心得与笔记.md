# 码农翻身--顿悟

## 关于学习

学习从来就不是一件轻松的事情：

* 思考，深度思考才会进步
* 枯燥，需要咬牙坚持

学习是一个螺旋上升的过程：

* 不要指望一下子就掌握全部
* 需要反复，需要回头看，有时候需要顿悟

## 思想：设计模式的本质（从代码编写的角度）

* 面向接口编程
* 多用组合

## 思想：责任转移

（1）结构化的方式[旧的做法]：下课后，老师一一告诉每一个学生，下一节课需要去到哪个教室听课。

* 获取听课人的名单e， 做如下事情：
  * 找到他要听的下一节课
  * 找到该课程的听课地点
  * 找到从你的教室到下一堂课的路线图
  * 告诉这个人怎么走

（2）面向对象的做法[新的方式]：

* 在教室的后面贴一张地图，标出每个教室的位置和路线。
* 告诉大家：“下课后自己去看后面的地图，自己找下一节课的位置”。

> 责任转移：
>
> 第一种方法：直接给每个人提供指示，责任全在老师自己身上。
>
> 第二种方法：只给出通用的指示（调用接口），让每个人自己去完成任务（面向对象的思路），责任在各个学生身上。最终，实现了**让责任划分到合适的对象当中**。老师只需要对Student发出一个“笼统”的指令：gotoNextClassroom()即可，不用关心实现细节，我们只需要针对接口gotoNextClassroom进行操作。

## 思想：软件开发的不同视角

> 在概念层次上：对象是一组责任。
>
> 在规约层次上，对象是一组可以被其他对象或自己调用的方法。
>
> 在实现层次上，对象是代码和数据。
>
> 来源：《UML精解》

这三个层次也给我在做系统架构设计时指明了一条出路：

1. 先整理出“名词性的对象”
2. 再整理出责任（能力）
3. 把责任进行合理划分，在这一步就开始抽象具体的能力接口，工具接口，常规责任，并把责任划分到具体的对象中
4. 用UML表示上一步的架构
5. ​

## 思想：一个好的面向对象系统：

* 面向对象的，可以复用的。（实际来说，可复用这个要求有点过于理想化，因此不必太拘泥于它的要求）
* 可以用最小的代价去修改系统
* 不用修改（或者很少的修改）现有代码就可以扩展
* 代码可读性强（这点是我自己加的）

## 鸭子的例子

## 我的体会：把“能力抽象为接口”

> 熟悉业务，找出变化并封装变化为接口。

在JDK中我们经常可以看到**把能力抽象为接口**的例子，比如Cloneable接口，Comparable接口，Iterable接口。在鸭子的例子中，**我们会把飞抽象为一种能力Flytable，会把叫也抽象为一种能力Quackable**，然后提供抽象类去实现这些接口，而这些抽象类（FlyWithWings、FlyNoWay）便是**“飞“这种能力的不同实现方式**。最后，**利用组合的思想**，具体的鸭子只需根据需要，把需要的抽象类作为成员变量持有即可。

## 我的体会：漂亮的架构长这样

## 我的体会：“发现变化并且封装变化的具体含义”

还是上面鸭子的例子，飞、叫都各自是一种变化维度，这时我们就发现了变化。此时，我们需要非常敏感的联想到**需要使用接口，把变化封装到接口中去！然后使用抽象类提供具体实现。最后利用组合，让使用这些变化的类持有变化接口的引用即可**。